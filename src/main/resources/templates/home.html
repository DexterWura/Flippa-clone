<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::title}, ~{::content})}">
<head>
    <title>Flippa Clone - Buy & Sell Online Businesses</title>
</head>
<body>
    <div th:fragment="content">
        <!-- Hero Section -->
        <section class="relative bg-gradient-to-br from-[#5a7bff] to-[#6ee7f9] text-[#0b1220] overflow-hidden py-12 lg:py-20">
            <!-- Floating Elements -->
            <div class="floating f1 absolute w-40 h-40 rounded-full bg-white/15 blur-sm -left-10 -top-10"></div>
            <div class="floating f2 absolute w-56 h-56 rounded-full bg-white/15 blur-sm right-[10%] -top-16"></div>
            <div class="floating f3 absolute w-36 h-36 rounded-full bg-white/15 blur-sm -right-16 bottom-20"></div>
            
            <!-- Wave SVG -->
            <div class="absolute bottom-0 left-0 right-0 h-30" style="background: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1440 320\"><path fill=\"%23f7f9fc\" fill-opacity=\"1\" d=\"M0,192L60,186.7C120,181,240,171,360,176C480,181,600,203,720,197.3C840,192,960,160,1080,154.7C1200,149,1320,171,1380,181.3L1440,192L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z\"></path></svg>') bottom center/cover no-repeat;"></div>
            
            <div class="container mx-auto px-4 relative z-10">
                <div class="grid lg:grid-cols-2 gap-8 items-center">
                    <div class="text-center lg:text-left">
                        <h1 class="text-5xl lg:text-6xl font-extrabold mb-4 text-white leading-tight">
                            The #1 platform for selling
                            <br>
                            <span class="block sm:inline">
                                <span id="typed" class="font-bold border-r-2 border-black/40 pr-1"></span>
                            </span>
                        </h1>
                        <p class="text-lg text-white/80 mb-6">
                            Buy and sell vetted digital assets with confidence — online businesses, social media accounts, and premium domains.
                        </p>
                        
                        <!-- Search Card -->
                        <div class="bg-white rounded-2xl shadow-2xl p-4 md:p-6">
                            <form th:action="@{/listings}" method="get" class="space-y-3">
                                <div class="grid grid-cols-1 md:grid-cols-12 gap-2">
                                    <div class="md:col-span-4">
                                        <div class="flex items-center border border-gray-300 rounded-lg px-3 py-2">
                                            <i class="fas fa-list text-gray-400 mr-2"></i>
                                            <select name="category" class="flex-1 outline-none" id="category">
                                                <option value="">All categories</option>
                                                <option value="WEBSITE">Online businesses</option>
                                                <option value="SOCIAL_MEDIA_ACCOUNT">Social media accounts</option>
                                                <option value="DOMAIN">Domains</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="md:col-span-6">
                                        <div class="flex items-center border border-gray-300 rounded-lg px-3 py-2">
                                            <i class="fas fa-search text-gray-400 mr-2"></i>
                                            <input type="search" name="search" class="flex-1 outline-none" placeholder="Search listings (e.g., Shopify store, IG handle, 2-word .com)" id="query" />
                                        </div>
                                    </div>
                                    <div class="md:col-span-2">
                                        <button type="submit" class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Search</button>
                                    </div>
                                </div>
                                <div class="flex flex-wrap gap-2 text-sm">
                                    <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full"><i class="fas fa-bolt mr-1"></i> Trending: SaaS</span>
                                    <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full"><i class="fas fa-hashtag mr-1"></i> 3-letter .io</span>
                                    <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full"><i class="fas fa-chart-line mr-1"></i> YouTube channels</span>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <div class="hidden lg:block">
                        <div class="bg-white rounded-3xl shadow-xl p-6">
                            <div class="flex items-center mb-4">
                                <i class="fas fa-shield-halved text-green-600 mr-2"></i>
                                <strong class="text-lg">Escrow & Verification</strong>
                            </div>
                            <p class="text-gray-600 mb-4">Secure transfers, identity checks, and migration support so every deal is smooth.</p>
                            <hr class="my-4">
                            <div class="space-y-3">
                                <div class="flex items-center"><i class="fas fa-badge-check text-blue-600 mr-2"></i> Vetted sellers & listings</div>
                                <div class="flex items-center"><i class="fas fa-clock-rotate-left text-blue-600 mr-2"></i> Real-time auctions</div>
                                <div class="flex items-center"><i class="fas fa-headset text-blue-600 mr-2"></i> 24/7 support</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Popular Section -->
        <section id="popular" class="py-12">
            <div class="container mx-auto px-4">
                <div class="text-center mb-8">
                    <h2 class="text-4xl font-extrabold text-[#1f2a44] mb-2">Popular right now</h2>
                    <p class="text-[#5a6a85]">Hand‑picked listings that buyers are watching.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div th:each="listing, iterStat : ${featuredListings}" 
                         th:if="${iterStat.index < 4}"
                         class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-all duration-150 hover:-translate-y-1 relative">
                        <!-- Badge Ribbon -->
                        <div class="absolute top-3 left-3 z-10">
                            <span th:if="${iterStat.index == 0}" 
                                  class="bg-red-100 text-red-700 border border-red-200 px-3 py-1 rounded-full text-xs font-semibold">
                                <i class="fas fa-gavel mr-1"></i> On Auction
                            </span>
                            <span th:if="${iterStat.index == 1}" 
                                  class="bg-blue-100 text-blue-700 border border-blue-200 px-3 py-1 rounded-full text-xs font-semibold">
                                <i class="fas fa-fire mr-1"></i> Popular
                            </span>
                            <span th:if="${iterStat.index == 2}" 
                                  class="bg-green-100 text-green-700 border border-green-200 px-3 py-1 rounded-full text-xs font-semibold">
                                <i class="fas fa-tags mr-1"></i> On Sale
                            </span>
                            <span th:if="${iterStat.index == 3}" 
                                  class="bg-blue-100 text-blue-700 border border-blue-200 px-3 py-1 rounded-full text-xs font-semibold">
                                <i class="fas fa-star mr-1"></i> Featured
                            </span>
                        </div>
                        <img th:src="${listing.imageUrl != null ? listing.imageUrl : 'https://picsum.photos/seed/' + listing.id + '/600/400'}" 
                             class="w-full h-48 object-cover" alt="Listing image" />
                        <div class="p-4">
                            <h5 class="font-bold text-lg mb-1" th:text="${listing.title}"></h5>
                            <p class="text-gray-600 text-sm mb-3" th:text="${#strings.abbreviate(listing.description, 80)}"></p>
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-xl" th:text="${'$' + #numbers.formatDecimal(listing.price, 0, 'COMMA', 2, 'POINT')}"></span>
                                <a th:href="@{/listings/{id}(id=${listing.id})}" class="px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 text-sm">View</a>
                            </div>
                        </div>
                    </div>
                    <div th:if="${featuredListings == null or featuredListings.isEmpty()}" class="col-span-full text-center py-12">
                        <p class="text-gray-500">No featured listings available at the moment.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Online Businesses Section -->
        <section id="online-businesses" class="py-12 bg-white border-t border-b">
            <div class="container mx-auto px-4">
                <div class="flex items-end justify-between mb-6">
                    <div>
                        <h3 class="text-3xl font-extrabold text-[#1f2a44] mb-1">
                            <i class="fas fa-briefcase text-blue-600 mr-2"></i> Online businesses
                        </h3>
                        <p class="text-[#5a6a85] mb-0">SaaS, e‑commerce, content, and more.</p>
                    </div>
                    <a href="/listings" class="px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 text-sm">View all</a>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div th:each="listing : ${activeListings}" 
                         th:if="${listing.type == T(com.flippa.entity.Listing.ListingType).WEBSITE || listing.type == T(com.flippa.entity.Listing.ListingType).SAAS || listing.type == T(com.flippa.entity.Listing.ListingType).ECOMMERCE_STORE}"
                         class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-all duration-150 hover:-translate-y-1">
                        <img th:src="${listing.imageUrl != null ? listing.imageUrl : 'https://picsum.photos/seed/' + listing.id + '/600/400'}" 
                             class="w-full h-48 object-cover" alt="Listing image" />
                        <div class="p-4">
                            <div class="flex items-center justify-between mb-2">
                                <h5 class="font-bold text-lg" th:text="${listing.title}"></h5>
                                <span class="bg-red-100 text-red-700 border border-red-200 px-2 py-1 rounded text-xs font-semibold">Auction</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">85k/mo pageviews • $3.4k/mo ads & affiliates</p>
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-xl" th:text="${'$' + #numbers.formatDecimal(listing.price, 0, 'COMMA', 2, 'POINT')}"></span>
                                <a th:href="@{/listings/{id}(id=${listing.id})}" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">Bid now</a>
                            </div>
                        </div>
                    </div>
                    <div th:if="${activeListings == null or activeListings.isEmpty()}" class="col-span-full text-center py-12">
                        <p class="text-gray-500">No listings available at the moment.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Social Media Accounts Section -->
        <section id="social-accounts" class="py-12">
            <div class="container mx-auto px-4">
                <div class="flex items-end justify-between mb-6">
                    <div>
                        <h3 class="text-3xl font-extrabold text-[#1f2a44] mb-1">
                            <i class="fas fa-hashtag text-blue-600 mr-2"></i> Social media accounts
                        </h3>
                        <p class="text-[#5a6a85] mb-0">Instagram, YouTube, TikTok, X, and more.</p>
                    </div>
                    <a href="/listings" class="px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 text-sm">View all</a>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div th:each="listing : ${activeListings}" 
                         th:if="${listing.type == T(com.flippa.entity.Listing.ListingType).SOCIAL_MEDIA_ACCOUNT}"
                         class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-all duration-150 hover:-translate-y-1">
                        <img th:src="${listing.imageUrl != null ? listing.imageUrl : 'https://picsum.photos/seed/' + listing.id + '/600/400'}" 
                             class="w-full h-48 object-cover" alt="Listing image" />
                        <div class="p-4">
                            <div class="flex items-center justify-between mb-2">
                                <h5 class="font-bold text-lg" th:text="${listing.title}"></h5>
                                <span class="bg-red-100 text-red-700 border border-red-200 px-2 py-1 rounded text-xs font-semibold">Auction</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">RPM $4.8 • 60% Tier‑1 audience</p>
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-xl" th:text="${'$' + #numbers.formatDecimal(listing.price, 0, 'COMMA', 2, 'POINT')}"></span>
                                <a th:href="@{/listings/{id}(id=${listing.id})}" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">Bid now</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Domains Section -->
        <section id="domains" class="py-12 bg-white border-t">
            <div class="container mx-auto px-4">
                <div class="flex items-end justify-between mb-6">
                    <div>
                        <h3 class="text-3xl font-extrabold text-[#1f2a44] mb-1">
                            <i class="fas fa-globe text-blue-600 mr-2"></i> Domains on sale
                        </h3>
                        <p class="text-[#5a6a85] mb-0">Brandable .com, premium .io, and more.</p>
                    </div>
                    <a href="/listings" class="px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 text-sm">View all</a>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div th:each="listing : ${activeListings}" 
                         th:if="${listing.type == T(com.flippa.entity.Listing.ListingType).DOMAIN}"
                         class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-all duration-150 hover:-translate-y-1">
                        <div class="p-4">
                            <div class="flex items-center justify-between mb-2">
                                <h5 class="font-bold text-lg" th:text="${listing.title}"></h5>
                                <span class="bg-red-100 text-red-700 border border-red-200 px-2 py-1 rounded text-xs font-semibold">Auction</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3">2‑word .com • Finance brand</p>
                            <div class="flex justify-between items-center">
                                <span class="font-bold text-xl" th:text="${'$' + #numbers.formatDecimal(listing.price, 0, 'COMMA', 2, 'POINT')}"></span>
                                <a th:href="@{/listings/{id}(id=${listing.id})}" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">Bid now</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // Typed / rotating words
        const words = ['online businesses', 'social accounts', 'domains'];
        const el = document.getElementById('typed');
        let wordIndex = 0, charIndex = 0, deleting = false;
        const typeSpeed = 70;
        const deleteSpeed = 45;
        const holdTime = 1200;

        function typeLoop() {
            if (!el) return;
            const current = words[wordIndex];
            if (!deleting) {
                el.textContent = current.slice(0, ++charIndex);
                if (charIndex === current.length) {
                    deleting = true;
                    setTimeout(typeLoop, holdTime);
                    return;
                }
            } else {
                el.textContent = current.slice(0, --charIndex);
                if (charIndex === 0) {
                    deleting = false;
                    wordIndex = (wordIndex + 1) % words.length;
                }
            }
            setTimeout(typeLoop, deleting ? deleteSpeed : typeSpeed);
        }
        typeLoop();
    </script>
</body>
</html>
